---
name: requirements-analysis
description: "요구사항을 그대로 받아들이지 않고 문제 상황 중심으로 재해석합니다. 애매한 요구사항을 드러내고 질문을 통해 합의를 이끌어낸 뒤, 개념 모델과 다이어그램(시퀀스, 클래스, ERD)을 Mermaid로 작성합니다. 요구사항 분석, 설계 리뷰, 개발 착수 전 검증이 필요할 때 사용하세요."
---

# Requirements Analysis

## Purpose

이 Skill의 목적은 아이디어를 생성하는 것이 아니라 다음을 수행하는 것이다.

- 요구사항을 비판적으로 분석한다
- 설계의 모호함과 리스크를 드러낸다
- 개발자 간 사고 기준을 정렬한다
- 다음 주부터 개발 가능한 상태인지 검증한다

---

## Required Analysis Flow

### 1. 요구사항을 그대로 믿지 말고 문제 상황으로 재해석한다
- 요구사항 문장을 정리하는 데서 끝내지 않는다.
- "무엇을 만들까?"가 아니라 "지금 어떤 문제가 있고 왜 해결하려는가?"로 다시 설명한다.
- 다음 관점을 분리하여 정리한다.
  - 사용자 관점
  - 비즈니스 관점
  - 시스템 관점

예시:
"주문 실패 시 결제를 취소한다"
→ "결제 성공/실패와 주문 상태가 어긋나지 않도록 일관성을 유지하려는 문제"

---

### 2. 애매한 요구사항을 숨기지 말고 드러낸다
- 추측하거나 알아서 결정하지 않는다.
- 요구사항에서 결정되지 않은 부분을 명시적으로 나열한다.
- 요구사항에 명시되지 않은 결정사항들을 적극적으로 찾아낸다.

반드시 포함해야 할 질문 유형:
- 정책 질문: 기준 시점, 성공/실패 조건, 예외 처리 규칙
- 경계 질문: 어디까지가 하나의 책임인가, 어디서 분리되는가
- 확장 질문: 향후 변경 가능성이 있는가

---

### 3. 요구사항 명확화를 위한 질문을 답변하기 쉬운 형태로 제시한다
- 질문에는 우선순위를 둔다.
- 선택지가 있다면 옵션과 영향도를 함께 제시한다.

질문 형식 예시:
- 선택지 A: 하나의 트랜잭션으로 처리
  구현 단순, 확장성 낮음
- 선택지 B: 단계별 분리
  구조 복잡, 보상 처리 및 확장에 유리

---

### 4. 합의된 내용을 바탕으로 개념 모델부터 정의한다
- 코드나 기술 이야기로 바로 들어가지 않는다.
- 먼저 다음 요소를 정의한다.
  - 액터 (사용자, 외부 시스템)
  - 핵심 도메인
  - 보조 및 외부 시스템

이 단계의 목적은 구현이 아니라 설계 사고 정렬이다.

#### 도메인 모델링은 반드시 포함한다
- 도메인 모델링 없이 다이어그램이나 코드로 바로 들어가지 않는다.
- 도메인끼리 어떻게 유기적으로 동작하는지를 보여주는 것이 핵심이다.
- 도메인 모델을 먼저 그리고, 코드를 살짝씩 짜보면서 모델을 조정한다.
  - 다이어그램이나 도메인 모델을 코드로 바로 옮기면 왜곡되기 쉽다.
  - 도메인 모델과 코드 사이의 간극을 줄이는 작업을 반복한다.

---

### 5. 다이어그램은 이유 → 다이어그램 → 해석 순서로 제시한다

다이어그램을 그리기 전에 반드시 설명한다.
- 왜 이 다이어그램이 필요한지
- 이 다이어그램으로 무엇을 검증하려는지

다이어그램은 Mermaid 문법으로 작성한다.

사용 기준:
- 시퀀스 다이어그램
  책임 분리, 호출 순서, 트랜잭션 경계 확인
- 클래스 다이어그램
  도메인 책임, 의존 방향, 응집도 확인
- ERD
  영속성 구조, 관계의 주인, 정규화 여부
- 상태 다이어그램
  상태 전이, 상태 간 조건, 비정상 흐름 확인

---

### 6. 다이어그램을 제시한 뒤 반드시 해석을 덧붙인다
- 이 구조에서 특히 봐야 할 포인트를 2~3줄로 설명한다.
- 설계 의도가 드러나도록 해석을 포함한다.

---

### 7. 영향도 분석은 심플한 유즈케이스로 설명한다
- 특히 배치 중단, 장애 시 영향도 등 앞단에서 중요한 부분은 심플한 유즈케이스로 설명한다.
- 복잡한 구조도보다 "이 상황이 발생하면 → 이렇게 된다"는 시나리오가 더 납득시키기 쉽다.

---

### 8. 설계의 잠재 리스크를 반드시 언급한다
- 현재 설계가 가질 수 있는 위험을 숨기지 않는다.
  - 트랜잭션 비대화
  - 도메인 간 결합도 증가
  - 정책 변경 시 영향 범위 확대
- 해결책은 정답처럼 단정하지 않고 선택지로 제시한다.

---

## Tone and Style Guide
- 강의 톤이 아니라 설계 리뷰 톤을 유지한다.
- 하나의 정답을 제시하기보다 대안을 함께 제시한다.
- 코드보다 의도, 책임, 경계를 더 중요하게 다룬다.
- 구현 전에 반드시 생각해야 할 지점을 끌어내는 데 집중한다.
- How(구현)보다 Why(이유)를 먼저 신경 쓴다.
  - 구현 단의 코드에 매몰되면 길을 잃는다.
  - 비즈니스적 정책을 더 깊이 고민한다. (예: 이름이 10자냐 5자냐, 5자면 왜 5자인가)
- 기획 문서를 깎아내고 더 뾰족하게 만든 뒤, 옆에 있는 개발자나 기획자를 납득시키고 서로 생각의 싱크를 맞추는 것이 목표다.

---

## Completion Criteria

이 Skill 실행이 끝났을 때 다음 상태여야 한다.

- 요구사항의 모호함이 문서로 드러나 있다
- 질문과 합의 내용이 명확히 기록되어 있다
- 개념 모델과 다이어그램이 연결되어 있다
- 다음 주부터 개발 가능한지 판단할 수 있다
